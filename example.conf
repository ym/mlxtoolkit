# Hash-style comments are supported. Part of a line starting with a hash
# till the end of the line is ignored.
# A config file consists of several sections.
# Each section contains directives according to its type.
# The types of sections are: global, port, bond, vlan, vrf, loopback.
# Sections can go in any order.
# The same section can appear multiple times, its directives are joined.
# If no section is specified so far, than it is [global] by default.
[global]
# Extra spaces in the section name and directives
# are mostly allowed and ignored.
 [  global  ]
# To include other files use include directive:
include /absolute/path/glob*.conf ./relative/path/*.conf
    include        also/relative/path/*.conf
# Included files are put to the read queue and are interpreted later.
# Relative pathes are relative to this config file
# or to the current working directory if the config is read from the input.

# Other sections have name consisting of a type and an identifier.
# Commonly it is a word of characters [-_a-zA-Z0-9], starting with a nonsymbol.
# A section name and an identifier can be also separated with "-" or "_"
# instead of a space. Or without a space if an identifier starts with a digit.
# Thesse all represent the same section:
[port 1]
[port1]
[port-1]
[port_1]
# A port section identifier can be only <number>
# or <number>/<number> for subports of splitted ports.
[port 3/0]
[port3/1]
[port-3/2]
[port_3/3]

# A vlan section identifier can be only <number>, which is also a vlan id.
[vlan 100]

# The loopback section type can be written also as "loop" or "lo".
# Theese are equivalent:
[loopback x]
[loop x]
[lo x]

# Port, bond, vlan and loopback sections are also interfaces.
# An interface name has the same syntax as its section name.

# Length of identifiers is limited by the total length of a device name.
# Example interface to device maps:
# bond 0one -> bond0one
# vrf red -> vrf-red
# loopback y -> loop_y

# Lists in directives are separated by ",".

# Interfaces can be set down:
[bond 4]
down
# Ports with no section defined are down by default.
# All interfaces with a secion defined are up by default.

# We can add a description to the interface, which will be written to
# the interface's alias parameter. The value of the description is
# from the first non-space character till the last non-scace character.
desc some string of almost any characters ~!@$%^&*()_+
# Do not forget that '#' is a beginning of the comment and it is dropped.
desc " # this description has only one character: "

# Ports can be splitted:
[port 6]
split 4 # splits port 6 into 4 ports: 6/0, 6/1, 6/2, 6/3.

# Ports can be attached to bonds in the port section:
[port 2/3]
bond ch1
# or in the bond section:
[bond ch1]
slaves port 1/0, port 2/0, port 3
slaves port 4 # the directive can be used several times

# Bonds and ports can be configured with vlans in the interface section:
[port 10]
vlan native 1
[bond b3]
vlan tag 2
vlan tag 3, 4, 5
# or in the vlan section:
[vlan 7]
native port 3, bond ch2
tag bond b1, port 4/3

# Port, bond, vlan and loopback interfaces
# can be configured with ip addresses and attached to a vrf
[loopback z]
vrf black
ip 192.168.0.1, 2001:db8::ffff/128
ip 192.168.0.2/32

# The LACP rate and minimum links can be configured on bonds.
# The only supported interface mode is 802.3ad (LACP)
# and hash policy is layer3+4.
[bond lacp1]
lacp_rate fast # this is the default
min_links 1 # this is the default
[bond lacp2]
lacp_rate slow
min_links 2

# In a vrf section there should be the number of the routing table defined.
# And here you can add routes to the vrf.
[vrf 5]
table 100
route 192.168.0.0/16 via 10.0.0.1 weight 10 # dev in the same vrf will be found 
route 192.168.0.0/16 via 10.0.1.1 dev vlan 2 # default weight 1
route 10.0.2.0/24 dev vlan 5 # device only route
route 172.16.0.1 metric 10 blackhole # blackhole route
route ::/0 via 2001:db8::1 metric 1000
# The falback default blackhole route with a high metric is added to every vrf.
# Routes with the same prefix and metric are combined into
# a single multipath route.
# The default metric for IPv4 is 0 and for IPv6 is 1024.

# Config syntax without comments:

#[global]
#include <glob> ...

#[port <num>]
#[port <num>/</num>]
#split <num>
#down
#bond <id>
#vlan native <id>
#vlan tag <id>, ...
#vrf <id>
#ip <ipmask>, ...

#[bond <id>]
#lacp_rate fast|slow
#min_links <num>
#slaves <iface>, ...
#down
#vlan native <id>
#vlan tag <id>, ...
#vrf <id>
#ip <ipmask>, ...

#[vlan <num>]
#native <iface>, ...
#tag <iface>, ...
#down
#vrf <id>
#ip <ipmask>, ...

#[loopback <id>]
#[loop <id>]
#[lo <id>]
#down
#vrf <id>
#ip <ipmask>, ...

#[vrf <id>]
#table <num>
#route <pfx> [metric <num>] [via <ip>] [dev <iface>] [weight <num>]
#route <pfx> [metric <num>] blackhole
